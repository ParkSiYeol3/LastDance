<!DOCTYPE html>
<html>
  <head>
    <title>Stripe 테스트 결제</title>
    <script src="https://js.stripe.com/v3/"></script>
    <style>
      body { font-family: sans-serif; padding: 40px; }
      #card-element { padding: 12px; border: 1px solid #ccc; border-radius: 8px; margin-bottom: 20px; }
    </style>
  </head>
  <body>
    <h2>테스트 결제</h2>
    <div id="card-element"></div>
    <button id="pay-button">💳 결제하기</button>

    <script>
      // 서버에서 받은 clientSecret를 여기에 넣어야 함
      const clientSecret = "pi_3RCBcYRxwuSn7oL70i3Shm4M_secret_IinKrSeOwFnd04XqG8KFftoWM"; // <- Thunder Client로 받은 거 붙여넣기

      const stripe = Stripe("pk_test_51RAVRNRxwuSn7oL7uBAkUbp7hrk1MVBsjiiOkFzpmHcKpxOnCY2XnLNko0n8tD9w3yf3qQCORToa5PvC3mPAqYGm00gBJKkeQj"); //  publishable key
      const elements = stripe.elements();
      const card = elements.create("card");
      card.mount("#card-element");

      document.getElementById("pay-button").addEventListener("click", async () => {
        const { paymentIntent, error } = await stripe.confirmCardPayment(clientSecret, {
          payment_method: {
            card: card,
          }
        });

        if (error) {
          alert("❌ 결제 실패: " + error.message);
        } else if (paymentIntent.status === "succeeded") {
          alert("✅ 결제 성공! ID: " + paymentIntent.id);
        }
      });
    </script>
  </body>
</html>
